<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¡Œç›®é é¢ - å»£æ±æ­Œå¡«è©å¤§è³½</title>
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* 0243 Game Styles */
        .tone-section {
            background-color: #FFF8E1; 
            border: 2px dashed #FFC107;
            text-align: center;
        }
        .tone-answer-box {
            margin-top: 15px;
            font-size: 2rem;
            font-weight: bold;
            letter-spacing: 5px;
            color: #4A90E2;
            background: #fff;
            padding: 10px;
            border-radius: 8px;
            display: none; /* Hidden by default */
        }
        .btn-reveal {
            background-color: #FFC107;
            color: #333;
            margin-top: 10px;
        }

        /* Source Text Style */
        .source-text {
            font-size: 0.85rem;
            color: #888;
            text-align: center;
            margin-top: 8px;
            font-style: italic;
        }
    </style>
</head>
<body>

    <header class="navbar">
        <a href="index.html">â¬…ï¸ è¿”å›é¦–é  (Back)</a>
    </header>

    <main class="container">

        <div class="card text-center">
            <h1 id="display-id">é¡Œç›®è¼‰å…¥ä¸­...</h1>
        </div>

        <section class="card tone-section">
            <h3>ğŸ 0243å¡«è©å¤§æ³•</h3>
            <p style="color: #666; font-size: 0.9rem;">ä¼°åŸ‹å°æ‡‰å˜…ã€Œ0243ã€ï¼</p>
            
            <button class="btn btn-reveal" onclick="showAnswer()">ğŸ‘€ ç­”æ¡ˆ</button>
            
            <div id="tone-answer-display" class="tone-answer-box">
                </div>
        </section>

        <section class="card">
            <span class="label-text">ğŸµ æ¨‚è­œ (Music Score)</span>
            
            <img id="img-score" src="" alt="Music Score" class="score-image" style="min-height: 200px; background: #eee;">
            
            <p id="display-source" class="source-text"></p>
        </section>

        <section class="card" id="audio-section">
            <div class="audio-player-wrapper">
                <span class="label-text">ğŸ¹ ä¸»æ—‹å¾‹ (Melody)</span>
                <audio id="audio-melody" controls>
                    <source src="" type="audio/mpeg">
                </audio>
            </div>
            
            <hr style="border: 0; border-top: 1px solid #eee; margin: 15px 0;">

            <div class="audio-player-wrapper">
                <span class="label-text">ğŸ¥ ç´”éŸ³æ¨‚/ä¼´å¥ (Backing Track)</span>
                <audio id="audio-backing" controls>
                    <source src="" type="audio/mpeg">
                </audio>
            </div>
        </section>

    </main>

    <script>
        // ---------------------------------------------------------
        // 1. THE DATABASE
        // ---------------------------------------------------------
        const songDatabase = {
            "001": {
                source: "æ­Œæ›²ä¾†æºï¼šOld MacDonald Had a Farm",
                tone_answer: "4-4-4-0-2-2-0",
                image: "score/001.png",
                melody: "melody/001.mp3",
                backing: "backing/001.mp3"
            },
            "002": {
                source: "æ­Œæ›²ä¾†æºï¼šTwinkle Twinkle Little Star",
                tone_answer: "0-0-4-4-3-3-4",
                image: "score/002.png",
                melody: "melody/002.mp3",
                backing: "backing/002.mp3"
            },
            "003": {
                source: "æ­Œæ›²ä¾†æºï¼šLondon Bridge is Falling Down",
                tone_answer: "4-3-3-4-2-4-3",
                image: "score/003.png",
                melody: "melody/003.mp3",
                backing: "backing/003.mp3"
            },
            "004": {
                source: "æ­Œæ›²ä¾†æºï¼šHappy Birthday to You",
                tone_answer: "0-0-2-0-4-2",
                image: "score/004.png",
                melody: "melody/004.mp3",
                backing: "backing/004.mp3"
            },
            "005": {
                source: "æ­Œæ›²ä¾†æºï¼šWe Wish You a Merry Christmas",
                tone_answer: "0-4-4-3-4-2-0-0",
                image: "score/005.png",
                melody: "melody/005.mp3",
                backing: "backing/005.mp3"
            },
            "006": {
                source: "æ­Œæ›²ä¾†æºï¼šJungle Bells",
                tone_answer: "2-2-2-2-2-2-2-3-0-0-2",
                image: "score/006.png",
                melody: "melody/006.mp3",
                backing: "backing/006.mp3"
            },
            "007": {
                source: "æ­Œæ›²ä¾†æºï¼šå¤šå•¦Aå¤¢",
                tone_answer: "0-4-4-2-3-2-4",
                image: "score/007.png",
                melody: "melody/007.mp3",
                backing: "backing/007.mp3"
            },
            "008": {
                source: "æ­Œæ›²ä¾†æºï¼šIt's a Small World",
                tone_answer: "4-4-3-4-3-3-3",
                image: "score/008.png",
                melody: "melody/008.mp3",
                backing: "backing/008.mp3"
            },
            "009": {
                source: "æ­Œæ›²ä¾†æºï¼šLonely Christmas",
                tone_answer: "2-4-2-4-4-3",
                image: "score/009.png",
                melody: "melody/009.mp3",
                backing: "backing/009.mp3"
            },
            "010": {
                source: "æ­Œæ›²ä¾†æºï¼šGreensleeves",
                tone_answer: "0-4-4-3-3-3-4-2-0",
                image: "score/010.png",
                melody: "melody/010.mp3",
                backing: "backing/010.mp3"
            }
        };

        // ---------------------------------------------------------
        // 2. PAGE LOGIC
        // ---------------------------------------------------------
        
        // Get ID from URL
        const urlParams = new URLSearchParams(window.location.search);
        const currentId = urlParams.get('id');

        // Grab Elements
        const titleEl = document.getElementById('display-id');
        const sourceEl = document.getElementById('display-source');
        const toneAnswerEl = document.getElementById('tone-answer-display');
        const imgEl = document.getElementById('img-score');
        const melodyEl = document.getElementById('audio-melody');
        const backingEl = document.getElementById('audio-backing');

        // Check ID and Render
        if (currentId && songDatabase[currentId]) {
            const data = songDatabase[currentId];
            console.log("Loading Question:", currentId);

            // 1. Text Info
            titleEl.innerText = "é¡Œç›®ç·¨è™Ÿ #" + currentId;
            sourceEl.innerText = data.source;
            toneAnswerEl.innerText = data.tone_answer;

            // 2. Media Paths (Assuming everything is in 'assets' folder)
            imgEl.src = "assets/" + data.image;       // e.g. assets/score/001.png
            melodyEl.src = "assets/" + data.melody;   // e.g. assets/melody/001.mp3
            backingEl.src = "assets/" + data.backing; // e.g. assets/backing/001.mp3
            
            // 3. Refresh Audio
            melodyEl.load();
            backingEl.load();

        } else {
            // Error Handling
            titleEl.innerText = "é¡Œç›®ä¸å­˜åœ¨";
            document.querySelector('.container').innerHTML = 
                "<div class='card text-center'>" +
                "<h1 style='color:red;'>âŒ æ‰¾ä¸åˆ°é¡Œç›®</h1>" +
                "<p>ç·¨è™Ÿ #" + (currentId || "Unknown") + " ä¸åœ¨è³‡æ–™åº«ä¸­ã€‚</p>" +
                "<a href='index.html' class='btn btn-primary'>è¿”å›é¦–é </a>" +
                "</div>";
        }

        // Toggle Answer Visibility
        function showAnswer() {
            const box = document.getElementById('tone-answer-display');
            if (box.style.display === 'block') {
                box.style.display = 'none';
            } else {
                box.style.display = 'block';
            }
        }
    </script>
</body>
</html>